# ==============================================================================
# LightMyFire - Environment Variables Configuration
# ==============================================================================
# Copy this file to .env.local and fill in the values
# NEVER commit .env.local to version control!
# ==============================================================================

# ------------------------------------------------------------------------------
# CRITICAL - Required for Launch
# ------------------------------------------------------------------------------

# Supabase Configuration (Required)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Stripe Payment Processing (Required)
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key-here
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret-here

# OpenAI Moderation API (Required for content moderation)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Internal Authentication (Required - Generate with: openssl rand -hex 32)
INTERNAL_AUTH_SECRET=your-generated-64-character-hex-secret-here

# Admin Password (Required - Replace default with secure password)
ADMIN_TESTING_PASSWORD=your-secure-admin-password-here

# Email Service (Required for order confirmations and notifications)
RESEND_API_KEY=re_your-resend-api-key-here
EMAIL_PASSWORD=your-email-password-here

# Site URL (Required for production)
NEXT_PUBLIC_SITE_URL=https://lightmyfire.app

# ------------------------------------------------------------------------------
# Optional Configuration
# ------------------------------------------------------------------------------

# Order Fulfillment Email (Defaults to mitch@lightmyfire.app)
FULFILLMENT_EMAIL=mitch@lightmyfire.app

# YouTube API (For song search feature)
YOUTUBE_API_KEY=your-youtube-api-key-here

# Printful API (Not used for manual fulfillment, but kept for future)
PRINTFUL_API_KEY=your-printful-api-key-here

# Vercel Deployment (Auto-populated by Vercel)
NEXT_PUBLIC_VERCEL_URL=your-deployment-url.vercel.app
VERCEL_URL=your-deployment-url.vercel.app

# ------------------------------------------------------------------------------
# Environment Variables Guide
# ------------------------------------------------------------------------------

# CRITICAL SECURITY NOTES:
# 1. Generate INTERNAL_AUTH_SECRET with: openssl rand -hex 32
# 2. Never use default/weak passwords for ADMIN_TESTING_PASSWORD
# 3. Keep SUPABASE_SERVICE_ROLE_KEY secret (never expose to client)
# 4. Stripe webhook secret comes from Stripe Dashboard > Webhooks
# 5. All *_SECRET_KEY variables must NEVER be in NEXT_PUBLIC_ vars

# SUPABASE CONFIGURATION:
# - NEXT_PUBLIC_SUPABASE_URL: Your Supabase project URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY: Public anon key (safe for client)
# - SUPABASE_SERVICE_ROLE_KEY: Service role key (SERVER-SIDE ONLY)
#   Get these from: Supabase Dashboard > Settings > API

# STRIPE CONFIGURATION:
# - STRIPE_SECRET_KEY: Secret key from Stripe Dashboard
# - STRIPE_WEBHOOK_SECRET: Webhook signing secret
#   Get from: Stripe Dashboard > Developers > Webhooks
#   Set up webhook endpoint: https://your-domain.com/api/webhooks/stripe
#   Events to subscribe: payment_intent.succeeded, payment_intent.payment_failed, charge.refunded

# OPENAI CONFIGURATION:
# - OPENAI_API_KEY: API key for content moderation
#   Get from: https://platform.openai.com/api-keys
#   Used for: Automatic content moderation using GPT-4

# INTERNAL AUTH:
# - INTERNAL_AUTH_SECRET: HMAC secret for internal API authentication
#   Purpose: Prevents unauthorized access to internal endpoints
#   Generate: openssl rand -hex 32 (must be 64 hex characters)

# EMAIL CONFIGURATION:
# - RESEND_API_KEY: API key from Resend.com
#   Get from: https://resend.com/api-keys
# - EMAIL_PASSWORD: SMTP password if using custom email
# - FULFILLMENT_EMAIL: Where order notifications are sent

# ADMIN CONFIGURATION:
# - ADMIN_TESTING_PASSWORD: Password for admin/testing access
#   IMPORTANT: Change from default before launch!

# YOUTUBE API:
# - YOUTUBE_API_KEY: For searching songs in post creation
#   Get from: Google Cloud Console > Credentials
#   Enable: YouTube Data API v3

# SITE CONFIGURATION:
# - NEXT_PUBLIC_SITE_URL: Your production domain
#   Used for: QR codes, emails, redirects
#   Format: https://your-domain.com (no trailing slash)

# VERCEL DEPLOYMENT:
# - VERCEL_URL: Auto-populated by Vercel
# - NEXT_PUBLIC_VERCEL_URL: Preview deployment URL

# ------------------------------------------------------------------------------
# Required Environment Variables by Feature
# ------------------------------------------------------------------------------

# Core Functionality (Always Required):
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY
# - SUPABASE_SERVICE_ROLE_KEY
# - NEXT_PUBLIC_SITE_URL

# Payment System (Required for orders):
# - STRIPE_SECRET_KEY
# - STRIPE_WEBHOOK_SECRET

# Content Moderation (Required for posts):
# - OPENAI_API_KEY

# Email System (Required for notifications):
# - RESEND_API_KEY

# Security (Required for production):
# - INTERNAL_AUTH_SECRET (generate with openssl rand -hex 32)
# - ADMIN_TESTING_PASSWORD (change from default)

# Optional Features:
# - YOUTUBE_API_KEY (for song search)
# - EMAIL_PASSWORD (if using SMTP)
# - FULFILLMENT_EMAIL (defaults to mitch@lightmyfire.app)
# - PRINTFUL_API_KEY (for future automation)

# ------------------------------------------------------------------------------
# Deployment Checklist
# ------------------------------------------------------------------------------

# Before deploying to production:
# 1. ✓ Set all CRITICAL variables in Vercel dashboard
# 2. ✓ Generate new INTERNAL_AUTH_SECRET (openssl rand -hex 32)
# 3. ✓ Update ADMIN_TESTING_PASSWORD to secure value
# 4. ✓ Configure Stripe webhook with production endpoint
# 5. ✓ Update NEXT_PUBLIC_SITE_URL to production domain
# 6. ✓ Test all email delivery to FULFILLMENT_EMAIL
# 7. ✓ Verify OpenAI moderation is working
# 8. ✓ Run database migrations (see PRODUCTION_DEPLOYMENT_CHECKLIST.md)
# 9. ✓ Test complete order flow (10, 20, 50 stickers)
# 10. ✓ Verify QR codes use production URLs

# For detailed deployment steps, see:
# - PRODUCTION_DEPLOYMENT_CHECKLIST.md
# - SUBSEQUENT_ACTIONS.md

# ==============================================================================
# End of Environment Variables Configuration
# ==============================================================================
